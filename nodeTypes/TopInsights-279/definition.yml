fileVersion: 1
id: "279"
isDisabled: false
metadata:
  defaultStorageLocation: null
  error: null
  nodeMetadataSpec: |-
    capitalized: Top Insights
    short: TI
    plural: TI
    tagColor: '#c71585'

    config:
    - groupName: Top Insights
      items:
      - type: materializationSelector
        options:
            - view
        default: view
        isRequired: true

      - displayName: CATEGORICAL DIMENSIONS
        attributeName: extractfunction
        type: toggleButton
        default: false
        isRequired: true

      - type: tabular
        displayName: 'Select Columns'
        attributeName: exby
        enableIf: '{%- if config.extractfunction %}true{%- else %}false{%- endif %}'
        isRequired: false
        columns:
          -  type: textBox
             displayName: Categorical Column(Alias)
             attributeName: askque
             isRequired: true

          -  type: columnDropdownSelector
             displayName: Categorical Column
             attributeName: epartColName 
             isRequired: true

      - displayName: CONTINUOUS DIMENSIONS
        attributeName: continuous_dimensions
        type: toggleButton
        default: false
        isRequired: false

      - type: tabular
        displayName: 'Select Columns'
        attributeName: cexby
        enableIf: '{%- if config.continuous_dimensions %}true{%- else %}false{%- endif %}'
        isRequired: false
        columns:
          -  type: textBox
             displayName: Continuous column (Alias)
             attributeName: caskque
             isRequired: true

          -  type: columnDropdownSelector
             displayName: Continuous Dimension column
             attributeName: cepartColName 
             isRequired: true       

      - type: columnDropdownSelector
        displayName: 'Metric Column'
        attributeName: 'metriccol'
        isRequired: true

      - type: columnDropdownSelector
        displayName: 'Label'
        attributeName: 'labelcol'
        isRequired: true

      - displayName: Filter Insights
        type: textBox
        attributeName: filterit
        default: "/*WHERE ABS(relative_change - 1) > 0.4*/"
        syntax: sql
        isRequired: false

      - displayName: Order By
        attributeName: orderby
        type: toggleButton
        default: false

      - type: tabular
        displayName: 'Sort column'
        attributeName: orderbycolumn
        isRequired: true
        enableIf: "{% if config.orderby %} true {% else %} false {% endif %}"
        columns:
          -  type: columnDropdownSelector
             displayName: Column Name
             attributeName: sortColName

          -  type: dropdownSelector
             displayName: Sort Order
             attributeName: sortOrder
             default: desc
             options:
             - desc
             - asc

    systemColumns:
    - displayName: "CONTRIBUTOR"
      attributeName: contributor
      transform: ""
      dataType: ARRAY
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "METRIC_CONTROL"
      attributeName: metric_control
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "METRIC_TEST"
      attributeName: metric_test
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "SURPRISE"
      attributeName: surprise
      transform: ""
      dataType: BOOLEAN
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "RELATIVE_CHANGE"
      attributeName: relative_change
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "GROWTH_RATE"
      attributeName: growth_rate
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "EXPECTED_METRIC_TEST"
      attributeName: expected_metric_test
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "OVERALL_METRIC_CONTROL"
      attributeName: overall_metric_control
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'  

    - displayName: "OVERALL_METRIC_TEST"
      attributeName: overall_metric_test
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "OVERALL_GROWTH_RATE"
      attributeName: overall_growth_rate
      transform: ""
      dataType: FLOAT
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "NEW_IN_TEST"
      attributeName: new_in_test
      transform: ""
      dataType: BOOLEAN
      placement: end
      description: 'Generated by Top Insights Model'

    - displayName: "MISSING_IN_TEST"
      attributeName: missing_in_test
      transform: ""
      dataType: BOOLEAN
      placement: end
      description: 'Generated by Top Insights Model'
name: Top Insights
type: NodeType
